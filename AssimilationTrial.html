<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
        
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
        
    </head>
    <body>
    
    <!--................................................................................Manpower-->   
        
        
        <div class="container con1 nopadding">
            <div class="row row1">
                    <div class="col-md-6" id="GFPBar"></div>
                    <div class="col-md-6" id="TotalPopBar"></div>
            </div>        
        </div>
         
        <div class="container con2 nopadding">
            <div class="row row2">
                    <div class="col-md-6" id="ManpowerAgeBar"></div>
                    <div class="col-md-6" id="TotMilPerBar"></div>
            </div>        
        </div>
        <hr>
        <hr>
        
        
    <!--................................................................................Airpower   -->
        
        
        <div class="container con3 nopadding">
            <div class="row row3">
                    <div class="col-md-6" id="TotalAir"></div>
                    <div class="col-md-6" id="AirStack"></div>
            </div>        
        </div>
         
        <div class="container con4 nopadding">
            <div class="row row4">
                    <div class="col-md-6" id="HeliStack"></div>
                    
            </div>        
        </div>
        <hr>
        <hr>
        
        
    <!--................................................................................Army    -->    
        
        
        <div class="container con5 nopadding">
            <div class="row row5">
                    <div class="col-md-6" id="ArmyStack"></div>
            </div>        
        </div>
        <hr>
        <hr>
        
    <!--................................................................................Naval    -->    
        
        
        <div class="container con6 nopadding">
            <div class="row row6">
                    <div class="col-md-6" id="TotalNavalBar"></div>
                    <div class="col-md-6" id="NavalStack"></div>
            </div>        
        </div>
        <hr>
        <hr>
        
        
    <!--................................................................................-->
      
      

    
        <script>
        queue()
            .defer(d3.csv, "data/1_Manpower_book.csv")
            .defer(d3.csv, "data/Z_Total_Breakdown.csv")
    
            .await(makeGraphs);
            
        
        function makeGraphs(error, manpowerData, TotalData) {
            var ndx0 = crossfilter(manpowerData);
            
          
    // ................................................................................MANPOWER Ranked
            var country_dim0 = ndx0.dimension(dc.pluck('Country'));
            var group = country_dim0.group().reduceSum(dc.pluck('Power_Index_rating'));
            var GFPBar = dc.rowChart("#GFPBar");
            
            GFPBar
                .width(600)
                .height(450)
                .dimension(country_dim0)
                .group(group)
                .xAxis().ticks(9);
        
    // ................................................................................Manpower Fixed 
        
            var ndx1 = crossfilter(TotalData)
            TotalData.forEach(function(d){
               d.Count=parseInt(d.Count); 
            });
        
            
            var gfpRank_dim2 = ndx1.dimension(dc.pluck("Country"));
            var gfp_by_Country2 = gfpRank_dim2.group().reduceSum(function(d) {
                if (d.Type === "Total_Population") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            // console.log(FightersByCountry.all())
            
            var PopChart = dc.barChart ("#TotalPopBar");
                
                PopChart
                    .width(600)
                    .height(450)
                    .dimension(gfpRank_dim2)
                    .group(gfp_by_Country2)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Population")
                    .yAxis().ticks(10);
    
           
                


            
            var ManpowerDim = ndx1.dimension(dc.pluck('Country'));
            var ManpowerAvailByCountry = ManpowerDim.group().reduceSum(function(d) {
                if (d.Type === "Manpower_Available") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ReachingAgeByCountry = ManpowerDim.group().reduceSum(function(d) {
                if (d.Type === "Reaching_Military_Age") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var MilChart = dc.barChart ("#ManpowerAgeBar");
                
                MilChart
                    .width(600)
                    .height(450)
                    .margins({top: 50, right: 50, bottom: 50, left: 50})
                    .dimension(ManpowerDim)
                    .group(ManpowerAvailByCountry)
                    .stack(ReachingAgeByCountry)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Military Personnel")
                    .yAxis().ticks(7);
            
            
            
            
            
            
            
            var Rowdim2 = ndx1.dimension(dc.pluck('Country'));
            var ActivePersByCountry = Rowdim2.group().reduceSum(function(d) {
                if (d.Type === "Active_Personnel") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ReservePersByCountry = Rowdim2.group().reduceSum(function(d) {
                if (d.Type === "Reserve_Personnel") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var MilChart = dc.barChart ("#TotMilPerBar");
                
                MilChart
                    .width(600)
                    .height(450)
                    .margins({top: 50, right: 50, bottom: 50, left: 50})
                    .dimension(Rowdim2)
                    .group(ActivePersByCountry)
                    .stack(ReservePersByCountry)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Military Personnel")
                    .yAxis().ticks(7);
                
            
            
            
            
            
                
           
           
// ................................................................................           
    // ................................................................................AIRPOWER
            
            
            
            var country_dim1 = ndx1.dimension(dc.pluck("Country"));
            var TotalAirStrByCountry = country_dim1.group().reduceSum(function(d) {
                if (d.Type === "Total_Aircraft_Strength") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            // console.log(FightersByCountry.all())
            
            var stackedChart = dc.barChart ("#TotalAir")
                
                stackedChart
                    .width(600)
                    .height(450)
                    .dimension(country_dim1)
                    .group(TotalAirStrByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Total Aircraft Strength");
            
            
            
            
            
            
    
            var country_dim2 = ndx1.dimension(dc.pluck("Country"));
            var FightersByCountry = country_dim2.group().reduceSum(function(d) {
                if (d.Type === "Fighter_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AttakersByCountry = country_dim2.group().reduceSum(function(d) {
                if (d.Type === "Attack_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TransportersByCountry = country_dim2.group().reduceSum(function(d) {
                if (d.Type === "Transport_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TrainersByCountry = country_dim2.group().reduceSum(function(d) {
                if (d.Type === "Trainer_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            

            
            
            var stackedChart = dc.barChart ("#AirStack")
                
                stackedChart
                    .width(600)
                    .height(450)
                    .dimension(country_dim2)
                    .group(FightersByCountry)
                    .stack(AttakersByCountry)
                    .stack(TransportersByCountry)
                    .stack(TrainersByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Aircraft");
                    
                    
                    
                    
         
            
            var country_dim3 = ndx1.dimension(dc.pluck("Country"));
            var TotalHeliByCountry = country_dim3.group().reduceSum(function(d) {
                if (d.Type === "Other_Helicopter_Strength") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AttackHeliByCountry = country_dim3.group().reduceSum(function(d) {
                if (d.Type === "Attack_Helicopters") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            var stackedChart = dc.barChart ("#HeliStack")
                
                stackedChart
                    .width(600)
                    .height(450)
                    .dimension(country_dim3)
                    .group(TotalHeliByCountry)
                    .stack(AttackHeliByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Helicopter");
    
    
    
    
            
    
            
    // ................................................................................ARMY
           
           
           
            var ArmyDim = ndx1.dimension(dc.pluck("Country"));
            var CombatTanksByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Combat_Tanks") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ArmouredFVByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Armoured_Fighting_Vehicles") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var SelfPropArtilleryByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Self_Propelled_Artillery") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TowedArtilleryByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Towed_Artillery") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var RocketProjByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Rocket_Projectors") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            
            var stackedChart = dc.barChart ("#ArmyStack")
                
                stackedChart
                    .width(600)
                    .height(450)
                    .dimension(ArmyDim)
                    .group(CombatTanksByCountry)
                    .stack(ArmouredFVByCountry)
                    .stack(SelfPropArtilleryByCountry)
                    .stack(TowedArtilleryByCountry)
                    .stack(RocketProjByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Vehicles");
            
            
            
            
            
                
    // ................................................................................NAVY        
            
            
            
            
            var NavalDim = ndx1.dimension(dc.pluck("Country"));
            var TotalNavalAssByCountry = NavalDim.group().reduceSum(function(d) {
                if (d.Type === "Total_Naval_Assets") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            

            var NavalChart = dc.barChart ("#TotalNavalBar");
                
                NavalChart
                    .width(600)
                    .height(450)
                    .dimension(NavalDim)
                    .group(TotalNavalAssByCountry)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Population")
                    .yAxis().ticks(10);
        
            
            
            
            
            
            var NavalDim2 = ndx1.dimension(dc.pluck("Country"));
            var MineVesselsByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Mine_Warefare_Vessels") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var PatrolCraftByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Patrol_Craft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var SubmarinesByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Submarines") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var CorvettesByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Corvettes") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var DestroyersByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Destroyers") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var FrigatesByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Frigates") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AircraftCarriersByCountry = NavalDim2.group().reduceSum(function(d) {
                if (d.Type === "Aircraft_Carriers") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            
            
            var NavalChart2 = dc.barChart ("#NavalStack")
                
                NavalChart2
                    .width(600)
                    .height(450)
                    .dimension(NavalDim2)
                    .group(MineVesselsByCountry)
                    .stack(PatrolCraftByCountry)
                    .stack(SubmarinesByCountry)
                    .stack(CorvettesByCountry)
                    .stack(DestroyersByCountry)
                    .stack(FrigatesByCountry)
                    .stack(AircraftCarriersByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Vehicles");
            
    
    // ................................................................................
    
    
            dc.renderAll();        
        }         
        
               
        </script>
        
    </body>
    
    <script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
</html>