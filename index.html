<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Global Military Firepower</title>
        
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="style.css">
        
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
        <!--<script type="text/javascript" src="static/js/graphs.js"></script>-->
        
    </head>
    <body>
    
    <!--................................................................................Navbar-->   
<div class="container-fluid container-all">
    <div class="title-bar row">
        <h1 class="col-md-4 col-md-offset-5">Global Military Firepower</h1>
    </div>
        <div class="container container-navbar">
            <nav class="navbar navbar-fixed-top">
                <div class="row">
                    <h4 class="nav-hr col-md-10 col-md-offset-1">Quick <u>Navigation</u></h4>
                    <button type="button" class="btn btn-info col-md-7 col-md-offset-2" data-toggle="modal" data-target="#IntroModal">About</button>
                    <a class="col-md-7 col-md-offset-2" href="#Manpower">Manpower</a>
                    <a class="col-md-7 col-md-offset-2" href="#Air">Air Power</a>
                    <a class="col-md-7 col-md-offset-2" href="#Army">Army Strength</a>
                    <a class="col-md-8 col-md-offset-2" href="#Naval">Naval Strength</a>
                    <a class="col-md-7 col-md-offset-2" href="#">Back to top</a>
                    
                    <div class="chart-stage">
                        <button class="btn btn-warning col-md-7 col-md-offset-2"><a href="javascript:dc.filterAll(); dc.renderAll();">Reset All</a></button>
                    </div>
                </div>
            </nav>
        </div>
        
        
        <div class="container">
            <div class="modal fade" id="IntroModal" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h2 class="modal-title"><strong>About This Website</strong></h2>
                        </div>
                         <div class="modal-body">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12 col-lg-12">
                                            <p>This website presents up-to-date information on the current Top 10 most powerful militaries in the world. They are compared in four sections: <strong>Manpower</strong>, <strong>Air Power</strong>, <strong>Army Strength</strong> and <strong>Naval Strength</strong>. This data is showcased using interactive bar charts, where bars can be clicked to only show the information for the countries you've selected. This filter is then applied to every chart on this site for simple comparison across sections.</p>
                                            <p>There is a <u>Quick Navigation</u> bar on the left for ease of access. This navigation bar also has a <u>Reset All</u> button to reset any chart filters you have applied.</p>
                                            <p>The data used in this website came from <a class="link" href="https://www.globalfirepower.com/country-military-strength-detail.asp?country_id=united-states-of-america"><u>GlobalFirepower.com</u></a>, which compares countries on a huge range of parameters, to then rank them by Power Index. The sections not covered in this website are <strong>Natural Resources (Petroleum)</strong>, <strong>Logistics</strong>, <strong>Finance</strong> and <strong>Geography</strong>.</p>
                                            <p>I hope you enjoy using and learning from this website!</p>
                                            <hr>
                                            <p>This is how GlobalFirepower.com describes their Power Index ranking:</p>
                                            <p>"Each military power detailed on GlobalFirepower.com is judged on individual as well as collective factors when it comes to waging a prolonged campaign against another. The numbers are calculated through our in-house formula to produce the <strong><u>Power Index</u></strong> value which is used in the final ranking. Note that some values are estimated when official numbers are not available.
                                            <br>The values showcased above are all considered for the final GFP ranking recognized as the Power Index. Power Index scores are judged against a perfect value of 0.0000 which is realistically unattainable due to the number of factors considered per country. Balance is the key - a large, strong fighting force across land, sea and air backed by a resilient economy and defensible territory along with an efficient infrastructure - such qualities are those used to round out a particular nation's total fighting strength on paper; it is not enough to field 10 million men or 20,000 tanks or lead the world in oil production.
                                            <br>Each nation's final ranking also carries with it bonuses and penalties as needed while landlocked countries (eg: Austria) are not penalized for lack of a standing Navy - though they do suffer a penalty for not maintaining a viable Merchant Marine force.
                                            <br>It bears repeating that nuclear weapons are NOT taken into account for this listing. Powers are based on conventional weaponry in inventory as well as other factors such as economic strength, border size, self-sustainability (in regards to wartime resources such as oil), water access etc.."</p>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        
       
    <!--................................................................................Manpower-->    
    <!--<div class="container container-body">-->
            <div class="container-fluid ManContainer">
                <a name="Manpower"></a>
                <div class="row row1">
                    <h2 class="col-md-6 col-md-offset-5">Manpower<button class="btn btn-sm btn-info pop-up-button" data-toggle="modal" data-target="#ManModal" title="More info" href="#">More Info</button></h2>
                    
                    <div>
                        <div class="pad1 col-md-6" id="GFPRank"><h3 class="col-md-5 col-md-offset-3"><u>Power Index</u></h3></div>
                    </div>
                    
                    <div>
                        <div class="pad1 col-md-6" id="TotalPopBar"><h3 class="col-md-5 col-md-offset-3"><u>Total Population</u></h3></div>
                        
                    </div>
                    
                    <div>
                        <div class="pad1 col-md-6" id="TotPersStack"><h3 class="col-md-7 col-md-offset-2"><u>Total Military Personnel</u></h3></div>
                    </div>
                    
                    <div>
                        <div class="pad1 col-md-6" id="ManpowerStack"><h3 class="col-md-6 col-md-offset-2"><u>Total Manpower</u></h3></div>
                    </div>
                    
                    
                    <div id="ManModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                        
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h3 class="modal-title"><strong>Manpower Info</strong></h3>
                                </div>
                                <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-12 col-lg-12">
                                                    <p><strong>Power Index Chart</strong> - This row chart arranges countries by their Power Index, where 0.0000 is the theoretical maximum.</p>
                                                    <p><strong>Total Population Chart</strong> - This bar chart displays countries' total populations</p>
                                                    <p><strong>Total Military Personnel Chart</strong> - This stacked chart displays total military personnel, split by active and reserve personnel.</p>
                                                    <p><strong>Total Manpower Chart</strong> - This bar chart displays current manpower</p>
                                                </div>
                                            </div>
                                        </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
                

            
        <!--................................................................................Airpower   -->
            
            <div class="container-fluid AirContainer">
                <a name="Air"></a>
                <div class="row row1">
                    <h2 class="col-md-6 col-md-offset-5">Air Power <button class="btn btn-sm btn-info pop-up-button" data-toggle="modal" data-target="#AirModal" title="More info" href="#">More Info</button></h2>
                    
                    <div>
                        <div class="pad1 col-md-6" id="TotalAir"><h3 class="col-md-5 col-md-offset-3"><u>Total Air Assets</u></h3></div>
                    </div>
                    
                    <div>
                        <div class="pad1 col-md-6" id="AirStack"><h3 class="col-md-5 col-md-offset-2"><u>Total Aircraft by Type</u></h3></div>
                        
                    </div>
                    
                    <div>
                        <div class="pad1 col-md-6" id="HeliStack"><h3 class="col-md-6 col-md-offset-2"><u>Total Helicopters by Type</u></h3></div>
                    </div>  
                        
                        
                    <div id="AirModal" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                        
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h3 class="modal-title"><strong>Manpower Info</strong></h3>
                                </div>
                                <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-12 col-lg-12">
                                                    <p><strong>Total Military Personnel Chart</strong> - </p>
                                                    <p></p>
                                                    <p></p>
                                                    <br></br>
                                                </div>
                                            </div>
                                        </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                        
                        
                </div>
            </div>

            
        <!--................................................................................Army    -->    
            
            <div class="container-fluid ArmyContainer">
                <a name="Army"></a>
                <div class="row row1 pad1 pad2">
                    <h2 class="col-md-6 col-md-offset-2">Army Strength <button class="btn btn-sm btn-info pop-up-button" data-toggle="modal" data-target="#ArmyModal" title="More info" href="#">More Info</button></h2>
                        
                    <div>
                        <div class="pad1 col-md-6" id="ArmyStack"><h3 class="col-md-11 col-md-offset-2"><u>Total Combat Vehicles by Type</u></h3></div>
                    </div>    
                        
                        
                        
                        <div id="ArmyModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                            
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h3 class="modal-title"><strong>Manpower Info</strong></h3>
                                    </div>
                                    <div class="modal-body">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                                        <p><strong>Graph 1</strong> - Each</p>
                                                        <p></p>
                                                        <p></p>
                                                        <br></br>
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                </div>
            </div>

        <!--................................................................................Naval    -->    
            
            <div class="container-fluid NavalContainer">
                <a name="Naval"></a>
                <div class="row row1 pad1">
                    <h2 class="col-md-6 col-md-offset-4">Naval Strength <button class="btn btn-sm btn-info pop-up-button" data-toggle="modal" data-target="#NavalModal" title="More info" href="#">More Info</button></h2>
                        
                    <div>
                        <div class="pad1 col-md-6" id="TotalNavalBar"><h3 class="col-md-5 col-md-offset-2"><u>Total Naval Assets</u></h3></div>
                    </div>    
                    
                    <div>
                        <div class="pad1 col-md-6" id="NavalStack"><h3 class="col-md-7 col-md-offset-2"><u>Total Sea Vessels by Type</u></h3></div>
                    </div>
                    
                    
                        <div id="NavalModal" class="modal fade" role="dialog">
                            <div class="modal-dialog">
                            
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h3 class="modal-title"><strong>Manpower Info</strong></h3>
                                    </div>
                                    <div class="modal-body">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                                        <p><strong>Graph 1</strong> - Each</p>
                                                        <p></p>
                                                        <p></p>
                                                        <br></br>
                                                    </div>
                                                </div>
                                            </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-info" data-dismiss="modal">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        
                </div>
            </div> 
        
    <!--</div>-->
</div>

<script>


        queue()
            .defer(d3.csv, "Z_Total_Breakdown.csv")
    
            .await(makeGraphs);
            
        
        function makeGraphs(error, TotalData) {
            var ndx = crossfilter(TotalData);
            
          
    // ................................................................................MANPOWER Ranked
            var GFPRank_dim = ndx.dimension(dc.pluck('Country'));

            var GFPRank_group = GFPRank_dim.group().reduceSum(function(d) {
                if (d.Type === "Power_Index_rating") {
                    return d.Count;
                } else {
                    return 0;
                }
            });


            console.log(GFPRank_group.all());
            
            var GFPBar = dc.rowChart("#GFPRank");
            
            GFPBar
                .width(580)
                .height(400)
                .dimension(GFPRank_dim)
                .group(GFPRank_group)
                .xAxis().ticks(9);
        
    // ................................................................................Manpower Fixed 
        
        
            var TotalPop_dim = ndx.dimension(dc.pluck("Country"));
            var TotalPop_group = TotalPop_dim.group().reduceSum(function(d) {
                if (d.Type === "Total_Population") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            // console.log(FightersByCountry.all())
            
            var PopChart = dc.barChart ("#TotalPopBar");
                
                PopChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 80})
                    .dimension(TotalPop_dim)
                    .group(TotalPop_group)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Population")
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/1.2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 18; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 20) return "display:none";
                        });
                        
                    });
           
                


            
            var Manpower_dim = ndx.dimension(dc.pluck('Country'));
            var Manpower_group = Manpower_dim.group().reduceSum(function(d) {
                if (d.Type === "Manpower_Available") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ReachingAgeByCountry = Manpower_dim.group().reduceSum(function(d) {
                if (d.Type === "Reaching_Military_Age") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var MilChart = dc.barChart ("#ManpowerStack");
                
                MilChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 80})
                    .dimension(Manpower_dim)
                    .group(Manpower_group, "Current Manpower Available")
                    .stack(ReachingAgeByCountry, "Reaching Military Age")
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Military Personnel")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/1.2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 18) return "display:none";
                        });
                        
                    });
            
            
            
            
            
            
            
            var TotalPersonnel_dim = ndx.dimension(dc.pluck('Country'));
            var ActivePersByCountry = TotalPersonnel_dim.group().reduceSum(function(d) {
                if (d.Type === "Active_Personnel") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ReservePersByCountry = TotalPersonnel_dim.group().reduceSum(function(d) {
                if (d.Type === "Reserve_Personnel") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var MilChart = dc.barChart ("#TotPersStack");
                
                MilChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 70})
                    .dimension(TotalPersonnel_dim)
                    .group(ActivePersByCountry, "Active Military Personnel")
                    .stack(ReservePersByCountry, "Reserve Military Personnel")
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Military Personnel")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/1.6); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 18) return "display:none";
                        });
                        
                    });
                
            
            
            
            
            
                
           
           
// ................................................................................           
    // ................................................................................AIRPOWER
            
            
            
            var TotalAir_dim = ndx.dimension(dc.pluck("Country"));
            var TotalAirStrByCountry = TotalAir_dim.group().reduceSum(function(d) {
                if (d.Type === "Total_Aircraft_Strength") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            // console.log(FightersByCountry.all())
            
            var stackedChart = dc.barChart ("#TotalAir")
                
                stackedChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 50})
                    .dimension(TotalAir_dim)
                    .group(TotalAirStrByCountry)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Total Aircraft Strength")
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 13; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 14) return "display:none";
                        });
                        
                    });
            
            
            
            
            
            
    
            var AirBreak_dim = ndx.dimension(dc.pluck("Country"));
            var FightersByCountry = AirBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Fighter_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AttakersByCountry = AirBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Attack_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TransportersByCountry = AirBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Transport_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TrainersByCountry = AirBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Trainer_Aircraft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            var stackedChart = dc.barChart ("#AirStack")
                
                stackedChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 50}) 
                    .dimension(AirBreak_dim)
                    .group(FightersByCountry, "Fighter Aircraft")
                    .stack(AttakersByCountry, "Attack Aircraft")
                    .stack(TransportersByCountry, "Transport Aircraft")
                    .stack(TrainersByCountry, "Trainer Aircraft")
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Aircraft")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))

                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 16) return "display:none";
                        });
                        
                    });
                    
                    
                    
         
            
            var Heli_dim = ndx.dimension(dc.pluck("Country"));
            var TotalHeliByCountry = Heli_dim.group().reduceSum(function(d) {
                if (d.Type === "Other_Helicopter_Strength") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AttackHeliByCountry = Heli_dim.group().reduceSum(function(d) {
                if (d.Type === "Attack_Helicopters") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            var stackedChart = dc.barChart ("#HeliStack")
                
                stackedChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 50})
                    .dimension(Heli_dim)
                    .group(TotalHeliByCountry, "Other Helicopters")
                    .stack(AttackHeliByCountry, "Attack Helicopters")
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Helicopters")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 13; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 15) return "display:none";
                        });
                        
                    });
    
    
    
    
            
    
            
    // ................................................................................ARMY
           
           
           
            var ArmyDim = ndx.dimension(dc.pluck("Country"));
            var CombatTanksByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Combat_Tanks") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var ArmouredFVByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Armoured_Fighting_Vehicles") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var SelfPropArtilleryByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Self_Propelled_Artillery") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var TowedArtilleryByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Towed_Artillery") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var RocketProjByCountry = ArmyDim.group().reduceSum(function(d) {
                if (d.Type === "Rocket_Projectors") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            
            var stackedChart = dc.barChart ("#ArmyStack")
                
                stackedChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 50})
                    .dimension(ArmyDim)
                    .group(CombatTanksByCountry, "Combat Tanks")
                    .stack(ArmouredFVByCountry, "Armoured Fighting Vehicles")
                    .stack(SelfPropArtilleryByCountry, "Self-Propelled Artillery")
                    .stack(TowedArtilleryByCountry, "Towed Artillery")
                    .stack(RocketProjByCountry, "Rocket Projectors")
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Vehicles")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 18) return "display:none";
                        });
                        
                    });
            
            
            
            
            
                
    // ................................................................................NAVY        
            
            
            
            
            var NavalDim = ndx.dimension(dc.pluck("Country"));
            var TotalNavalAssByCountry = NavalDim.group().reduceSum(function(d) {
                if (d.Type === "Total_Naval_Assets") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            

            var NavalChart = dc.barChart ("#TotalNavalBar");
                
                NavalChart
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 40})
                    .dimension(NavalDim)
                    .group(TotalNavalAssByCountry)
                    .transitionDuration(700)
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Total Naval Assets")
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 18) return "display:none";
                        });
                        
                    });

            
            
            
            
            
            var NavalBreak_dim = ndx.dimension(dc.pluck("Country"));
            var MineVesselsByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Mine_Warefare_Vessels") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var PatrolCraftByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Patrol_Craft") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var SubmarinesByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Submarines") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var CorvettesByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Corvettes") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var DestroyersByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Destroyers") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var FrigatesByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Frigates") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            var AircraftCarriersByCountry = NavalBreak_dim.group().reduceSum(function(d) {
                if (d.Type === "Aircraft_Carriers") {
                    return d.Count;
                } else {
                    return 0;
                }
            });
            
            
            
            
            var NavalChart2 = dc.barChart ("#NavalStack")
                
                NavalChart2
                    .width(580)
                    .height(400)
                    .margins({top: 50, right: 50, bottom: 40, left: 40})
                    .dimension(NavalBreak_dim)
                    .group(MineVesselsByCountry, "Mine Warfare Vessels")
                    .stack(PatrolCraftByCountry, "Patrol Craft")
                    .stack(SubmarinesByCountry, "Submarines")
                    .stack(CorvettesByCountry, "Corvettes")
                    .stack(DestroyersByCountry, "Destroyers")
                    .stack(FrigatesByCountry, "Frigates")
                    .stack(AircraftCarriersByCountry, "Aircraft Carriers")
                    .x(d3.scale.ordinal().domain(["USA","Russia","China","India","France","UK","Japan","Turkey","Germany","Egypt"]))
                    .xUnits(dc.units.ordinal)
                    .xAxisLabel("Country")
                    .yAxisLabel("Number of Sea Vessels")
                    .legend(dc.legend().x(400).y(10).itemHeight(13).gap(5))
                    .renderlet(function (chart) {
        
                        var gLabels = chart.select(".labels");
                        if (gLabels.empty()){
                            gLabels = chart.select(".chart-body").append('g').classed('labels', true);
                        }
                        
                        var gLabelsData = gLabels.selectAll("text").data(chart.selectAll(".bar")[0]);
                        
                        gLabelsData.exit().remove(); //Remove unused elements
                        
                        gLabelsData.enter().append("text"); //Add new elements
                        
                        gLabelsData
                        .attr('text-anchor', 'middle')
                        .attr('fill', 'white')
                        .text(function(d){
                            return d3.select(d).data()[0].data.value
                        })
                        .attr('x', function(d){ 
                            return +d.getAttribute('x') + (d.getAttribute('width')/2); 
                        })
                        .attr('y', function(d){ return +d.getAttribute('y') + 15; })
                        .attr('style', function(d){
                            if (+d.getAttribute('height') < 18) return "display:none";
                        });
                        
                    });
            
    
    // ................................................................................
    
    
            dc.renderAll();        
        }         
        
    
            
</script>

    
    </body>
    
    <script type="text/javascript" src="https://code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    
</html>